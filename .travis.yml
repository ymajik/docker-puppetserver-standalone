services:
 - docker
before_install:
  - docker run --rm -i lukasmartinelli/hadolint hadolint --ignore DL4000 --ignore DL3008 - < Dockerfile
script:
  - docker build --build-arg VCS_REF=$TRAVIS_COMMIT BUILD_DATE="$(date -u +"%Y-%m-%dT%H:%M:%SZ")" -t puppet .
  - docker run -d -p 127.0.0.1:8140:8140 --name puppet puppet
  - docker ps | grep -q puppet
